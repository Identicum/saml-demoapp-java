version: '3.7'

services:
  idp:
    image: jboss/keycloak:15.0.2
    restart: always
    environment:
      KEYCLOAK_USER: admin
      KEYCLOAK_PASSWORD: admin
    volumes:
      - ./keycloak/startup-scripts/:/opt/jboss/startup-scripts/
      - ./keycloak/custom-scripts/:/opt/jboss/custom-scripts/
      - ./keycloak/objects/:/opt/jboss/keycloak/objects/
    ports:
      - 8080:8080

  saml:
    image: identicum/saml-demoapp-java
    restart: always
    environment:
      JAVA_OPTS: -Donelogin.saml2.sp.entityid=http://saml:8081/saml-demoapp-java/ -Donelogin.saml2.sp.assertion_consumer_service.url=http://saml:8081/saml-demoapp-java/acs.jsp 
      #-Donelogin.saml2.idp.entityid=idp-entityid -Donelogin.saml2.idp.x509cert=idp-x509cert -Donelogin.saml2.idp.single_sign_on_service.url=idp-sso-url
    ports:
      - 8081:8080